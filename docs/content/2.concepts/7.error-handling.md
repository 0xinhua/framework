# Error handling

Nuxt 3 is a full-stack framework, which mean there are several sources of unpreventable user runtime errors that can happen in different contexts:

1. Errors during the Vue rendering lifecycle (SSR + SPA)
1. Errors during API or Nitro server lifecycle
1. Server and client startup errors (SSR + SPA)

## Handling errors yourself

### Errors during the Vue rendering lifecycle (SSR + SPA)

You can hook into Vue errors using [`onErrorCaptured`](https://vuejs.org/api/composition-api-lifecycle.html#onerrorcaptured).

In addition, Nuxt provides a `vue:error` hook that will be called if there are any errors that propagate up to the top level.

If you are using a error reporting framework, you can provide a global handler through [`vueApp.config.errorHandler`](https://vuejs.org/api/application.html#app-config-errorhandler). It will receive all Vue errors, even if they are handled.

#### Example with global error reporting framework

```js
export default defineNuxtPlugin((nuxtApp) => {
  nuxtApp.vueApp.config.errorHandler = (error, context) => {
    // ...
  }
})
```

### Server and client startup errors (SSR + SPA)

Nuxt provides an `app:error` hook that will be called if there are any errors in starting your Nuxt application. This includes:

* running Nuxt plugins
* processing `app:created` and `app:beforeMount` hooks
* mounting the app (on client-side), though you should handle this case with `onErrorCaptured` or with `vue:error`
* processing the `app:mounted` hook

<!--
### Errors during API or Nitro server lifecycle

TODO:
-->

## Rendering an error page 

When Nuxt encounters an error rendering your Vue application, whether SSR or SPA, it will render an error page instead of your `app.vue`. You can customize this page by adding `~/error.vue` in the source directory of your application, alongside `app.vue`. This page has a single prop - `errors` which contains an array of errors for you to handle.

When you are ready to remove the error page, you can emit an `errorHandled` event which will clear the list of errors. Optionally, you can pass a path to redirect to (for example, if you want to navigate to a 'safe' page).

::alert{type="warning"}
Make sure not to use anything dependent on Nuxt plugins, such as `$route` or `useRouter`, as these will not run until you emit the `errorHandled` event.
::

### Example

```vue [error.vue]
<template>
  <button @click="handleError">Clear errors</button>
</template>

<script setup>
const props = defineProps({
  errors: Array
})
const emit = defineEmits<{
  (event: 'errorHandled', redirect?: string): void
}>()

const handleError = () => emit('errorHandled', '/')
</script>
```
